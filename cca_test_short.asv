clear all

f = fopen("C:\Users\RISHI\Desktop\FYP\EEG-decoding\eeg_lib\log\fs512hz_gain255_30s\12hz\12hz_LED2.txt");
data = textscan(f,'%s');
fclose(f);
data = removeDC(str2double(data{1}(2:end-1))');
data = bandpass(data,[1 37],512);

X = (data) / (max(data));

fs = 512; % Sampling frequency (samples per second) 
dt = 1/fs; % seconds per sample 
StopTime = 1; % seconds 
t = (0:dt:StopTime)'; % seconds 

results = [];

% #########################################################################
F = 7; % Sine wave frequency (hertz) 
data = sin(2*pi*F*t);
Y = data(1:end-1,:)';
[r7, Wx7, Wy7] = cca_calc(X(:,1:length(Y)),Y);
% #########################################################################
F = 10; % Sine wave frequency (hertz) 
data = sin(2*pi*F*t);
Y = data(1:end-1,:)';
[r10, Wx10, Wy10] = cca_calc(X(:,1:length(Y)),Y);
% #########################################################################
F = 12; % Sine wave frequency (hertz) 
data = sin(2*pi*F*t);
Y = data(1:end-1,:)';
[r12, Wx12, Wy12] = cca_calc(X(:,1:length(Y)),Y);
% #########################################################################

if r12 > r10 && r12 > r7
    results(end+1) = 12;
elseif r10 > r7
    results(end+1) = 10;
else
    results(end+1) = 7
    