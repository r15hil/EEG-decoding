clear all

f = fopen("C:\Users\RISHI\Desktop\FYP\EEG-decoding\eeg_lib\log\fs512hz_gain255_30s\7hz\7hz_LED4.txt");
data = textscan(f,'%s');
fclose(f);
data = removeDC(str2double(data{1}(2:end-1))');
data = bandpass(data,[1 37],512);

X = (data) / (max(data));

fs = 512; % Sampling frequency (samples per second) 
dt = 1/fs; % seconds per sample 
StopTime = 30; % seconds 
t = (0:dt:StopTime)'; % seconds 

% #########################################################################
F = 7; % Sine wave frequency (hertz) 
data = sin(2*pi*F*t);
data1 = cos(2*pi*F*t);
Y = data(1:end-1,:)';
Y1 = data1(1:end-1,:)';

data_h = sin(2*pi*F*2*t);
data1_h = cos(2*pi*F*2*t);
Y_h = data_h(1:end-1,:)';
Y1_h = data1_h(1:end-1,:)';

[r7, Wx7, Wy7] = cca_calc(X(:,1:length(Y)),Y);
[r7_1, Wx7_1, Wy7_1]= cca_calc(X(:,1:length(Y1)),Y1);

[r7_h, Wx7_h, Wy7_h] = cca_calc(X(:,1:length(Y)),Y_h);
[r7_1_h, Wx7_1_h, Wy7_1_h]= cca_calc(X(:,1:length(Y1_h)),Y1_h);
% #########################################################################
F = 10; % Sine wave frequency (hertz) 
data = sin(2*pi*F*t);
data1 = cos(2*pi*F*t);
Y = data(1:end-1,:)';
Y1 = data1(1:end-1,:)';

[r10, Wx10, Wy10] = cca_calc(X(:,1:length(Y)),Y);
[r10_1, Wx10_1, Wy10_1]= cca_calc(X(:,1:length(Y1)),Y1);
% #########################################################################
F = 12; % Sine wave frequency (hertz) 
data = sin(2*pi*F*t);
data1 = cos(2*pi*F*t);
Y = data(1:end-1,:)';
Y1 = data1(1:end-1,:)';

[r12, Wx12, Wy12] = cca_calc(X(:,1:length(Y)),Y);
[r12_1, Wx12_1, Wy12_1]= cca_calc(X(:,1:length(Y1)),Y1);
% #########################################################################

r7_avg = 0.5 * (r7 + r7_1)
r10_avg = 0.5 * (r10 + r10_1)
r12_avg = 0.5 * (r12 + r12_1)